<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨‚ç¥¨æ­¥é©Ÿ 1: é¸æ“‡ç¥¨å‹™é¡å‹èˆ‡å ´æ¬¡ - Vieshow Ticketing</title> 

    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        // Tailwind é…ç½®
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'vieshow-red': '#e50914',
                        'vieshow-gold': '#f7a83d',
                        'vieshow-dark': '#1a1a1a',
                        'gray-500': '#6b7280',
                    },
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans TC', 'sans-serif'],
                    },
                },
            },
        };

        // 3. çµ±ä¸€çš„è‡ªå®šç¾© Alert å‡½æ•¸ (ç”¨æ–¼ç¢ºä¿æ¨£å¼ä¸€è‡´æ€§)
        // ----------------------------------------------------

        /**
         * è‡ªå®šç¾© Modal è­¦å‘Šæ¡†ï¼Œä¸¦æ¥å—ä¸€å€‹é»æ“Šç¢ºèªå¾ŒåŸ·è¡Œçš„ callback å‡½æ•¸ã€‚
         * @param {string} message - é¡¯ç¤ºçš„è¨Šæ¯ã€‚
         * @param {function} [callback] - ç”¨æˆ¶é»æ“Šã€Œç¢ºèªã€å¾Œè¦åŸ·è¡Œçš„å‡½æ•¸ (å¯é¸)ã€‚
         */
        function customAlert(message, callback) { 
            const existingModal = document.getElementById('custom-alert-modal');
            if (existingModal) existingModal.remove();

            const handleConfirm = () => {
                document.getElementById('custom-alert-modal').remove();
                if (callback && typeof callback === 'function') {
                    callback(); 
                }
            };

            window.customAlertConfirm = handleConfirm;

            const modalHtml = `
                <div id="custom-alert-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
                    <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm transform scale-100 transition-all duration-300">
                        <div class="text-xl font-bold text-gray-900 mb-3 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-vieshow-red mr-2" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                            </svg>
                            ç³»çµ±æç¤º
                        </div>
                        <p class="text-gray-700 mb-5">${message}</p>
                        <div class="flex justify-end">
                            <button onclick="window.customAlertConfirm()" 
                                    class="bg-vieshow-red hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 focus:outline-none focus:ring-2 focus:ring-vieshow-red focus:ring-offset-2">
                                ç¢ºèª
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHtml);
        }
        window.alert = customAlert;
    </script>
    
    <style>
        /* General Layout */
        body {
            background-color: #f7f7f7;
            font-family: 'Noto Sans TC', 'Inter', sans-serif;
            color: #333;
        }
        .main-content {
            padding: 2rem 0;
            min-height: 80vh;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Booking Card */
        .booking-card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }
        .title-section {
            border-bottom: 1px solid #e5e5e5;
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
        }
        .main-title {
            font-size: 1.875rem; /* 30px */
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 0.5rem;
        }
        .step-title {
            font-size: 1.25rem; /* 20px */
            font-weight: 600;
            color: #e50914;
        }
        .step-description {
            color: #6b7280;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Step Indicator */
        .step-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 2rem;
        }
        .step-circle {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 700;
            color: white;
            background-color: #9ca3af; /* Pending */
            transition: all 0.3s;
        }
        .step-active {
            background-color: #e50914; /* Active */
            box-shadow: 0 0 0 5px rgba(229, 9, 20, 0.3);
        }
        .step-completed {
            background-color: #10b981; /* Completed/Green */
        }
        .step-line {
            width: 3rem;
            height: 3px;
            background-color: #9ca3af; /* Pending */
            margin: 0 0.5rem;
            transition: background-color 0.3s;
        }
        .step-line.step-active {
            background-color: #e50914;
        }

        /* Form Elements */
        .form-section > div {
            padding: 1rem 0;
            border-bottom: 1px solid #f3f4f6;
        }
        .section-label {
            display: block;
            font-size: 1.125rem;
            font-weight: 600;
            color: #333;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
        }
        .select-styled {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            background-color: #f9fafb;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .select-styled:focus {
            border-color: #e50914;
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);
            outline: none;
        }
        .select-help {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }

        /* Ticket Type Selection (Step 1) */
        .ticket-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        .ticket-type-card {
            border: 2px solid #e5e5e5;
            border-radius: 0.75rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .ticket-type-card:hover {
            border-color: #f7a83d;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .ticket-type-card.selected {
            border-color: #e50914;
            box-shadow: 0 0 0 4px rgba(229, 9, 20, 0.1);
            background-color: #fff5f5;
        }
        .ticket-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .ticket-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        .ticket-description {
            color: #6b7280;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        .feature-item {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        .feature-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }
        .dot-blue { background-color: #3b82f6; }
        .dot-green { background-color: #10b981; }

        .group-ticket-info {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f0fdf4;
            border: 1px dashed #4ade80;
            border-radius: 0.5rem;
        }
        .group-ticket-title {
            font-weight: 600;
            color: #16a34a;
            margin-bottom: 0.5rem;
        }
        .group-ticket-list {
            list-style: none;
            padding-left: 0;
            font-size: 0.9rem;
            color: #16a34a;
        }

        /* Movie Selection (Step 3) */
        .movie-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        .movie-card {
            border: 1px solid #e5e5e5;
            border-radius: 0.75rem;
            overflow: hidden;
            transition: all 0.2s;
            background-color: #fafafa;
            position: relative;
        }
        .movie-card:hover {
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }
        .movie-card.selected {
            border-color: #e50914;
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);
        }
        .movie-content {
            padding: 1rem;
        }
        .movie-layout {
            display: flex;
            gap: 1rem;
        }
        .movie-poster-container {
            flex-shrink: 0;
            width: 100px;
            height: 150px;
        }
        .movie-poster {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0.5rem;
        }
        .movie-details {
            flex-grow: 1;
        }
        .movie-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 0.25rem;
        }
        .movie-tags {
            margin-bottom: 0.5rem;
        }
        .movie-tag {
            display: inline-block;
            padding: 0.1rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }
        .tag-red { background-color: #fee2e2; color: #ef4444; }
        .tag-gray { background-color: #e5e7eb; color: #4b5563; }
        .movie-description {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }
        .group-badge {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #10b981;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 10;
        }

        /* Showtime Selection (Step 4) */
        .showtime-section {
            padding: 1rem 0;
            background-color: #f9fafb;
            border-radius: 0.75rem;
        }
        .date-section {
            padding: 0 1rem 1rem 1rem;
        }
        .date-header {
            font-size: 1.125rem;
            font-weight: 700;
            color: #1a1a1a;
            background-color: #f3f4f6;
            padding: 0.5rem 1rem;
            margin: 1rem -1rem 1rem -1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .showtime-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        .showtime-card {
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            background-color: white;
            position: relative;
        }
        .showtime-card:hover {
            border-color: #f7a83d;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .showtime-card.selected {
            border-color: #e50914;
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);
            background-color: #fff5f5;
        }
        .showtime-time {
            font-size: 1.5rem;
            font-weight: 700;
            color: #e50914;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
        .showtime-details {
            font-size: 0.875rem;
            color: #4b5563;
        }
        .showtime-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.25rem;
        }
        .showtime-divider {
            padding-top: 0.5rem;
            margin-top: 0.5rem;
            border-top: 1px dashed #e5e7eb;
        }
        .seats-low {
            color: #f59e0b;
            font-weight: 700;
        }
        .seats-available {
            color: #10b981;
            font-weight: 700;
        }
        .showtime-group-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #3b82f6;
            color: white;
            padding: 0.1rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 10;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 1.5rem;
            background-color: #1a1a1a;
            color: #9ca3af;
            font-size: 0.875rem;
            margin-top: 2rem;
        }

        /* Button & Status */
        .button-container {
            padding-top: 2rem;
            text-align: center;
        }
        .next-step-button {
            background-color: #e50914;
            color: white;
            padding: 0.8rem 2rem;
            font-size: 1.125rem;
            font-weight: 700;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }
        .next-step-button:hover:not(:disabled) {
            background-color: #c50711;
        }
        .next-step-button:disabled {
            background-color: #fda4af;
            cursor: not-allowed;
        }
        .loading-message {
            text-align: center;
            margin-top: 1.5rem;
            font-size: 0.95rem;
            color: #6b7280;
        }
        .success-message {
            padding: 0.75rem;
            background-color: #ecfdf5;
            border: 1px solid #a7f3d0;
            border-radius: 0.5rem;
            color: #047857;
            margin-top: 1rem;
        }
        .success-text {
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
    
    <header class="bg-gray-800 text-white shadow-md">
        <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
            <a href="../../index.html" class="text-xl font-bold hover:text-vieshow-red transition duration-300">Vieshow å½±åŸ</a>
            <div id="headerNavRight" class="space-x-4">
            </div>
        </nav>
    </header>

    <div class="main-content">
        <div class="container">
            <div class="step-indicator">
                <div class="step-circle step-active">1</div>
                <div class="step-line step-pending"></div>
                <div class="step-circle step-pending">2</div>
                <div class="step-line step-pending"></div>
                <div class="step-circle step-pending">3</div>
                <div class="step-line step-pending"></div>
                <div class="step-circle step-pending">4</div>
                <div class="step-line step-pending"></div>
                <div class="step-circle step-pending">5</div>
            </div>
            
            <div id="bookingCard" class="booking-card">
                
                <div class="title-section">
                    <h1 class="main-title">ğŸŸï¸ è¨‚ç¥¨æµç¨‹</h1>
                    <p class="step-title">é¸æ“‡ç¥¨å‹™é¡å‹èˆ‡å ´æ¬¡</p>
                    <p class="step-description">è«‹å…ˆé¸æ“‡ç¥¨å‹™é¡å‹ï¼Œç„¶å¾Œä¾åºé¸æ“‡å½±åŸã€é›»å½±å’Œå ´æ¬¡ã€‚</p>
                </div>

                <form id="bookingFlow1Form" action="#" method="POST" class="form-section">
                    
                    <div id="ticketTypeSection">
                        <label class="section-label">
                            <span style="margin-right: 0.5rem;">ğŸ«</span> é¸æ“‡ç¥¨å‹™é¡å‹
                        </label>
                        
                        <div class="ticket-type-grid">
                            <div class="ticket-type-card general" data-type="general">
                                <div class="ticket-type-content">
                                    <div class="ticket-icon">ğŸ‘¤</div>
                                    <h3 class="ticket-title">ä¸€èˆ¬è³¼ç¥¨</h3>
                                    <p class="ticket-description">å€‹äººæˆ–å°åœ˜é«”è§€å½±é¸æ“‡</p>
                                    <div class="ticket-features">
                                        <div class="feature-item">
                                            <span class="feature-dot dot-blue"></span>
                                            <span>é©åˆ **1-8 äºº**è§€å½±</span>
                                        </div>
                                        <div class="feature-item">
                                            <span class="feature-dot dot-blue"></span>
                                            <span>å¤šç¨®ç¥¨ç¨®é¸æ“‡</span>
                                        </div>
                                        <div class="feature-item">
                                            <span class="feature-dot dot-blue"></span>
                                            <span>å³æ™‚ç·šä¸Šé¸ä½</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="ticket-type-card group" data-type="group">
                                <div class="ticket-type-content">
                                    <div class="ticket-icon">ğŸ‘¥</div>
                                    <h3 class="ticket-title">åœ˜é«”ç¥¨</h3>
                                    <p class="ticket-description">10äººä»¥ä¸Šåœ˜é«”å„ªæƒ </p>
                                    <div class="ticket-features">
                                        <div class="feature-item">
                                            <span class="feature-dot dot-green"></span>
                                            <span>é©åˆ **10-20 äºº**åœ˜é«”</span>
                                        </div>
                                        <div class="feature-item">
                                            <span class="feature-dot dot-green"></span>
                                            <span>å°ˆå±¬åœ˜é«”å„ªæƒ åƒ¹</span>
                                        </div>
                                        <div class="feature-item">
                                            <span class="feature-dot dot-green"></span>
                                            <span>éœ€æå‰é ç´„</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="groupTicketInfo" class="group-ticket-info hidden">
                            <h4 class="group-ticket-title">ğŸ‰ åœ˜é«”ç¥¨å°ˆå±¬å„ªæƒ </h4>
                            <ul class="group-ticket-list">
                                <li>â€¢ **10äººä»¥ä¸Š**äº«åœ˜é«”å„ªæƒ åƒ¹ (é™ **20 äºº**ä»¥ä¸‹)</li>
                                <li>â€¢ å¯é ç´„å°ˆå±¬å ´æ¬¡æ™‚æ®µ</li>
                                <li>â€¢ å°ˆäººæœå‹™å”åŠ©å®‰æ’åº§ä½</li>
                                <li>â€¢ å¯å®¢è£½åŒ–é¤é»çµ„åˆ</li>
                                <li>â€¢ éœ€æ–¼è§€å½±å‰3å¤©é è¨‚</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div id="cinemaSelectionSection" class="hidden">
                        <label for="cinema_location" class="section-label">
                            <span style="margin-right: 0.5rem;">ğŸ“</span> é¸æ“‡å½±åŸåœ°é»
                        </label>
                        <select id="cinema_location" name="cinema_location" required class="select-styled">
                            <option value="" disabled selected>è«‹é¸æ“‡å½±åŸåœ°é»</option>
                            </select>
                        <p class="select-help">é¸æ“‡æ‚¨æƒ³è§€å½±çš„å½±åŸåœ°é» (**å¿…å¡«**)</p>
                    </div>
                    
                    <div id="movieSelectionSection" class="hidden">
                        <label class="section-label">
                            <span style="margin-right: 0.5rem;">ğŸ¬</span> é¸æ“‡é›»å½±
                        </label>
                        
                        <div id="movieSelection" class="movie-grid">
                            <div style="grid-column: 1 / -1; text-align: center; padding: 2rem 0; color: var(--gray-500);">
                                è«‹å…ˆé¸æ“‡å½±åŸåœ°é»ä»¥é¡¯ç¤ºé›»å½±æ¸…å–®
                            </div>
                        </div>
                    </div>
                    
                    <div id="showtimeSelectionSection" class="hidden">
                        <label class="section-label">
                            <span style="margin-right: 0.5rem;">ğŸ•’</span> é¸æ“‡å ´æ¬¡
                        </label>
                        
                        <div id="showtimeSelection" class="showtime-section">
                            <div style="text-align: center; padding: 2rem 0; color: var(--gray-500);">
                                è«‹å…ˆé¸æ“‡é›»å½±ä»¥é¡¯ç¤ºå ´æ¬¡è³‡è¨Š
                            </div>
                        </div>
                    </div>
                    
                    <div id="loadingStatus" class="loading-message"></div>

                    <div class="button-container">
                        <button type="submit" id="nextStepButton" class="next-step-button" disabled>
                            ä¸‹ä¸€æ­¥: é¸æ“‡ç¥¨ç¨®èˆ‡é¤é»
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // é é¢è·¯å¾‘å¸¸æ•¸
        const INDEX_PAGE_URL = '../../index.html';
        const LOGIN_PAGE_URL = '../auth/login.html';
        const MEMBER_HOME_URL = '../member/member_home.html';

        // --- Mock è³‡æ–™è¨­å®š (å·²æ•´åˆæ‚¨çš„é è¨­æ¢ä»¶) ---
        const MOCK_CINEMAS = [
            { id: 'taipei_xinyi', name: 'å°åŒ—ä¿¡ç¾©å½±åŸ', region: 'å°åŒ—' },
            { id: 'banqiao_fuzhong', name: 'æ¿æ©‹åºœä¸­å½±åŸ', region: 'æ–°åŒ—' },
        ];

        // å½±å»³è¨­å®š: 40 å€‹ä½ç½®ï¼Œ10% å·²å”® (4 å€‹)
        // B å»³æœ‰æ„›å¿ƒåº§ (6 å€‹)
        const SHOWTIME_TEMPLATE = [
            // å½±å»³ A: 40 ç¸½ä½, 0 æ„›å¿ƒ, 4 å·²å”®
            { id: 101, time: '14:00', theater: 'Aå»³', seats: 40, careSeats: 0, reserved: 4, type: 'æ•¸ä½ç‰ˆ', language: 'è‹±èª', subtitle: 'ä¸­æ–‡å­—å¹•', availableForGroup: true },
            // å½±å»³ B: 40 ç¸½ä½, 6 æ„›å¿ƒ, 4 å·²å”®
            { id: 102, time: '17:30', theater: 'Bå»³', seats: 40, careSeats: 6, reserved: 4, type: 'IMAX 3D', language: 'è‹±èª', subtitle: 'ä¸­æ–‡å­—å¹•', availableForGroup: true },
            // å½±å»³ C: 40 ç¸½ä½, 0 æ„›å¿ƒ, 4 å·²å”® - (æ¨¡æ“¬åœ˜é«”ç¥¨ä¸é©ç”¨)
            { id: 103, time: '20:00', theater: 'Cå»³', seats: 40, careSeats: 0, reserved: 4, type: '4DX', language: 'ä¸­æ–‡', subtitle: 'ç„¡', availableForGroup: false },
        ];

        const MOCK_MOVIES = [
            { 
                id: 1, 
                title: 'é˜¿å‡¡é” 3: æœ€çµ‚æˆ°å½¹', 
                duration: '180åˆ†é˜',
                rating: 'ä¿è­·ç´š',
                genre: 'ç§‘å¹»/å‹•ä½œ',
                image: 'https://via.placeholder.com/300x450/4A5568/FFFFFF?text=Avatar+3',
                description: 'å»¶çºŒå‰ä½œåŠ‡æƒ…ï¼Œç´ç¾äººèˆ‡äººé¡çš„æˆ°çˆ­é€²å…¥æœ€çµ‚ç« ',
                showtimes: SHOWTIME_TEMPLATE
            },
            { 
                id: 2, 
                title: 'ä¸å¯èƒ½çš„ä»»å‹™ 8', 
                duration: '158åˆ†é˜',
                rating: 'è¼”12ç´š',
                genre: 'å‹•ä½œ/å†’éšª',
                image: 'https://via.placeholder.com/300x450/2D3748/FFFFFF?text=Mission+Impossible',
                description: 'ä¼Šæ£®éŸ“ç‰¹å†æ¬¡æŒ‘æˆ°ä¸å¯èƒ½çš„ä»»å‹™',
                showtimes: SHOWTIME_TEMPLATE.filter(s => s.type === 'IMAX 3D' || s.type === '4DX')
            }
        ];
        
        // --- æ—¥æœŸå·¥å…·å‡½æ•¸ (è³¼ç¥¨æ—¥ ~ è³¼ç¥¨æ—¥+7å¤©) ---
        /**
         * å–å¾—å¾ä»Šå¤©é–‹å§‹ n å¤©å…§çš„æ—¥æœŸæ¸…å–®
         * @param {number} days - åŒ…å«ä»Šå¤©åœ¨å…§çš„å¤©æ•¸
         */
        function getNextNDays(days) {
            const dates = [];
            const today = new Date();
            today.setHours(0, 0, 0, 0); 
            const dayNames = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];

            for (let i = 0; i < days; i++) {
                const nextDay = new Date(today);
                nextDay.setDate(today.getDate() + i);

                const dateStr = `${nextDay.getFullYear()}/${(nextDay.getMonth() + 1).toString().padStart(2, '0')}/${nextDay.getDate().toString().padStart(2, '0')}`;
                const dayOfWeekStr = dayNames[nextDay.getDay()];
                
                dates.push({
                    date: `${dateStr}(${dayOfWeekStr})`,
                    simpleDate: `${nextDay.getFullYear()}-${(nextDay.getMonth() + 1).toString().padStart(2, '0')}-${nextDay.getDate().toString().padStart(2, '0')}`
                });
            }
            return dates;
        }

        // --- ç™»å…¥/ç™»å‡º/å°è¦½åˆ—é‚è¼¯ ---
        function renderLoggedOutState() {
            const headerNavRight = document.getElementById('headerNavRight');
            if (!headerNavRight) return;
            const currentUrl = encodeURIComponent(window.location.href);
            const loginRedirectUrl = `${LOGIN_PAGE_URL}?redirect=${currentUrl}`;
            headerNavRight.innerHTML = `
                <a href="${loginRedirectUrl}" class="hover:text-vieshow-gold transition duration-300">ç™»å…¥</a>
                <a href="${MEMBER_HOME_URL}" class="hover:text-vieshow-gold transition duration-300">æœƒå“¡ä¸­å¿ƒ</a>
            `;
        }

        function renderLoggedInState() {
            const headerNavRight = document.getElementById('headerNavRight');
            if (!headerNavRight) return;
            headerNavRight.innerHTML = `
                <a href="#" id="signOutLink" class="hover:text-vieshow-gold transition duration-300">ç™»å‡º</a>
                <a href="${MEMBER_HOME_URL}" class="hover:text-vieshow-gold transition duration-300">æœƒå“¡ä¸­å¿ƒ</a>
            `;
            document.getElementById('signOutLink')?.addEventListener('click', handleSignOut);
        }

        function handleSignOut(e) {
            e.preventDefault();
            localStorage.removeItem('auth_token');
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('currentBooking'); // æ¸…é™¤æœªå®Œæˆçš„è¨‚å–®
            alert('æ‚¨å·²æˆåŠŸç™»å‡ºã€‚å³å°‡å°å‘é¦–é ...', () => {
                setTimeout(() => {
                    window.location.href = INDEX_PAGE_URL;
                }, 2000);
            }); 
            renderUI();
        }

        function renderUI() {
            const token = localStorage.getItem('auth_token');
            if (token) {
                renderLoggedInState(); 
            } else {
                renderLoggedOutState();
            }
        }

        function checkLoginStatus() {
            const token = localStorage.getItem('auth_token');
            if (!token) {
                alert('è«‹å…ˆç™»å…¥æ‰èƒ½é€²è¡Œè¨‚ç¥¨', () => {
                    const currentPage = window.location.pathname + window.location.search;
                    window.location.href = `${LOGIN_PAGE_URL}?redirect=${encodeURIComponent(currentPage)}`;
                });
                return false;
            }
            return true;
        }

        // --- æ ¸å¿ƒé‚è¼¯ ---
        const cinemaSelect = document.getElementById('cinema_location');
        const movieSelection = document.getElementById('movieSelection');
        const showtimeSelection = document.getElementById('showtimeSelection');
        const nextButton = document.getElementById('nextStepButton');
        const loadingStatus = document.getElementById('loadingStatus');
        const form = document.getElementById('bookingFlow1Form');
        const groupTicketInfo = document.getElementById('groupTicketInfo');
        const cinemaSelectionSection = document.getElementById('cinemaSelectionSection');
        const movieSelectionSection = document.getElementById('movieSelectionSection');
        const showtimeSelectionSection = document.getElementById('showtimeSelectionSection');

        let currentSelections = {
            ticketType: null, // 'general' æˆ– 'group'
            cinema: null,
            movie: null,
            showtime: null
        };

        // ç¥¨å‹™é¡å‹é¸æ“‡ (æ­¥é©Ÿ 1)
        function setupTicketTypeSelection() {
            const ticketCards = document.querySelectorAll('.ticket-type-card');
            
            ticketCards.forEach(card => {
                card.addEventListener('click', function() {
                    ticketCards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    currentSelections.ticketType = this.dataset.type;
                    
                    if (currentSelections.ticketType === 'group') {
                        groupTicketInfo.classList.remove('hidden');
                        nextButton.textContent = 'ä¸‹ä¸€æ­¥: å¡«å¯«åœ˜é«”è³‡è¨Š';
                    } else {
                        groupTicketInfo.classList.add('hidden');
                        nextButton.textContent = 'ä¸‹ä¸€æ­¥: é¸æ“‡ç¥¨ç¨®èˆ‡é¤é»';
                    }
                    
                    resetSelection(1);
                    cinemaSelectionSection.classList.remove('hidden');
                    loadCinemas();
                    updateStepIndicator(1);
                });
            });
        }
        
        // é‡ç½®å¾ŒçºŒé¸æ“‡çš„å€å¡Šå’Œç‹€æ…‹
        function resetSelection(startStep) {
            if (startStep <= 1) {
                currentSelections.cinema = null;
                cinemaSelect.selectedIndex = 0;
                movieSelectionSection.classList.add('hidden');
            }
            if (startStep <= 2) {
                currentSelections.movie = null;
                showtimeSelectionSection.classList.add('hidden');
                movieSelection.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 2rem 0; color: #6b7280;">è«‹å…ˆé¸æ“‡å½±åŸåœ°é»ä»¥é¡¯ç¤ºé›»å½±æ¸…å–®</div>';
            }
            if (startStep <= 3) {
                currentSelections.showtime = null;
                nextButton.disabled = true;
                loadingStatus.textContent = '';
                showtimeSelection.innerHTML = '<div style="text-align: center; padding: 2rem 0; color: #6b7280;">è«‹å…ˆé¸æ“‡é›»å½±ä»¥é¡¯ç¤ºå ´æ¬¡è³‡è¨Š</div>';
            }
        }


        // æ›´æ–°æ­¥é©ŸæŒ‡ç¤ºå™¨
        function updateStepIndicator(step) {
            document.querySelectorAll('.step-circle').forEach((circle, index) => {
                circle.classList.remove('step-active', 'step-completed', 'step-pending');
                if (index < step) {
                    circle.classList.add('step-completed');
                } else if (index === step) {
                    circle.classList.add('step-active');
                } else {
                    circle.classList.add('step-pending');
                }
            });
            
            document.querySelectorAll('.step-line').forEach((line, index) => {
                line.classList.remove('step-active', 'step-pending');
                line.classList.add(index < step - 1 ? 'step-active' : 'step-pending');
            });
        }

        // æ­¥é©Ÿ 2: å‹•æ…‹è¼‰å…¥å½±åŸåœ°é»
        async function loadCinemas() {
            try {
                loadingStatus.textContent = 'æ­£åœ¨è¼‰å…¥å½±åŸåœ°é»...';
                
                const data = { cinemas: MOCK_CINEMAS }; 
                await new Promise(resolve => setTimeout(resolve, 500)); // æ¨¡æ“¬å»¶é²
                
                cinemaSelect.innerHTML = '<option value="" disabled selected>è«‹é¸æ“‡å½±åŸåœ°é»</option>';
                data.cinemas.forEach(cinema => {
                    const option = document.createElement('option');
                    option.value = cinema.id;
                    option.textContent = `${cinema.name} (${cinema.region})`;
                    cinemaSelect.appendChild(option);
                });

                cinemaSelect.disabled = false;
                loadingStatus.textContent = '';
            } catch (error) {
                console.error('è¼‰å…¥å½±åŸå¤±æ•—:', error);
                loadingStatus.textContent = 'è¼‰å…¥å½±åŸè³‡æ–™å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯ã€‚';
            }
        }

        // æ­¥é©Ÿ 3: æ ¹æ“šé¸æ“‡çš„å½±åŸï¼Œå‹•æ…‹è¼‰å…¥é›»å½±æ¸…å–®
        async function loadMovies(cinemaId) {
            movieSelection.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 2rem 0; color: #6b7280;">è¼‰å…¥é›»å½±ä¸­...</div>';
            resetSelection(2);

            try {
                await new Promise(resolve => setTimeout(resolve, 600)); // æ¨¡æ“¬å»¶é²
                
                let movies = MOCK_MOVIES;
                
                // æ ¹æ“šä½¿ç”¨è€…é¸æ“‡çš„ç¥¨å‹™é¡å‹éæ¿¾é›»å½±æ¸…å–®
                if (currentSelections.ticketType === 'group') {
                    // åœ˜é«”ç¥¨: åªé¡¯ç¤ºæœ‰å¯ç”¨åœ˜é«”å ´æ¬¡çš„é›»å½±
                    const availableMovieIds = MOCK_MOVIES.filter(movie => 
                        movie.showtimes.some(st => st.availableForGroup)
                    ).map(m => m.id);
                    movies = MOCK_MOVIES.filter(m => availableMovieIds.includes(m.id));
                } 
                // ä¸€èˆ¬è³¼ç¥¨å‰‡é¡¯ç¤ºæ‰€æœ‰é›»å½± (å› ç‚º MOCK_MOVIES é è¨­å°±æ˜¯æ‰€æœ‰é›»å½±)
                
                movieSelection.innerHTML = '';
                
                if (movies.length === 0) {
                    movieSelection.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 2rem 0; color: #6b7280;">ç›®å‰ç„¡ç¬¦åˆæ‚¨é¸æ“‡æ¢ä»¶çš„é›»å½±</div>';
                    movieSelectionSection.classList.remove('hidden');
                    updateStepIndicator(2);
                    return;
                }
                
                movies.forEach(movie => {
                    const movieCard = document.createElement('div');
                    movieCard.className = 'movie-card cursor-pointer';
                    movieCard.dataset.movieId = movie.id;
                    movieCard.tabIndex = 0;
                    
                    const canGroupBook = movie.showtimes.some(st => st.availableForGroup);
                    const groupBadge = (canGroupBook && currentSelections.ticketType !== 'group') ?
                        '<span class="group-badge">å¯åœ˜é«”é è¨‚</span>' : '';
                    
                    movieCard.innerHTML = `
                        <div class="movie-content">
                            ${groupBadge}
                            <div class="movie-layout">
                                <div class="movie-poster-container">
                                    <img src="${movie.image}" alt="${movie.title}" class="movie-poster">
                                </div>
                                <div class="movie-details">
                                    <h3 class="movie-title">${movie.title}</h3>
                                    <div class="movie-tags">
                                        <span class="movie-tag tag-red">${movie.rating}</span>
                                        <span class="movie-tag tag-gray">${movie.genre}</span>
                                        <span class="movie-tag tag-gray">${movie.duration}</span>
                                    </div>
                                    <p class="movie-description">${movie.description}</p>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    movieCard.addEventListener('click', () => selectMovie(movie));
                    movieCard.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            selectMovie(movie);
                        }
                    });
                    
                    movieSelection.appendChild(movieCard);
                });
                
                movieSelectionSection.classList.remove('hidden');
                updateStepIndicator(2);
                
            } catch (error) {
                console.error('è¼‰å…¥é›»å½±å¤±æ•—:', error);
                movieSelection.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 2rem 0; color: #6b7280;">è¼‰å…¥é›»å½±æ¸…å–®å¤±æ•—</div>';
            }
        }

        // é¸æ“‡é›»å½±
        function selectMovie(movie) {
            document.querySelectorAll('.movie-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const selectedCard = document.querySelector(`[data-movie-id="${movie.id}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            currentSelections.movie = movie;
            loadShowtimes(currentSelections.cinema.id, movie.id);
        }

        // æ­¥é©Ÿ 4, 5: å‹•æ…‹è¼‰å…¥å ´æ¬¡æ¸…å–® (å¯¦ä½œæ—¥æœŸå’Œåº§ä½éæ¿¾)
        async function loadShowtimes(cinemaId, movieId) {
            showtimeSelection.innerHTML = '<div style="text-align: center; padding: 2rem 0; color: #6b7280;">è¼‰å…¥å ´æ¬¡ä¸­...</div>';
            resetSelection(3);

            try {
                await new Promise(resolve => setTimeout(resolve, 500)); // æ¨¡æ“¬å»¶é²
                
                const movie = MOCK_MOVIES.find(m => m.id == movieId);
                if (!movie) throw new Error("æ‰¾ä¸åˆ°é›»å½±è³‡è¨Š");
                
                // æ±ºå®šæœ€å¤§è³¼ç¥¨äººæ•¸ (å€‹äºº: 8, åœ˜é«”: 20)
                const maxCapacityNeeded = currentSelections.ticketType === 'group' ? 20 : 8;
                
                // å–å¾—æ—¥æœŸç¯„åœ: è³¼ç¥¨æ—¥ ~ è³¼ç¥¨æ—¥+7å¤© (å…± 7 å¤©)
                const next7Days = getNextNDays(7); 
                
                let allShowtimes = [];
                next7Days.forEach(day => {
                    movie.showtimes.forEach(template => {
                        // è¨ˆç®—å‰©é¤˜ä¸€èˆ¬åº§ä½æ•¸: ç¸½ä½ - å·²å”® - æ„›å¿ƒåº§
                        const availableGeneralSeats = template.seats - template.reserved - template.careSeats;
                        
                        // æª¢æŸ¥ 1: å½±å»³å¯è³¼è²·çš„ä½ç½®æ•¸ - ç¥¨ç¨®çš„æœ€å¤§äººæ•¸ >= 0
                        const seatsPass = availableGeneralSeats >= maxCapacityNeeded;
                        
                        // æª¢æŸ¥ 2: åœ˜é«”ç¥¨æª¢æŸ¥
                        const groupPass = (currentSelections.ticketType === 'group') ? template.availableForGroup : true;
                        
                        if (seatsPass && groupPass) {
                            allShowtimes.push({
                                ...template,
                                id: `${day.simpleDate}-${template.id}`, 
                                date: day.date, 
                                availableSeats: availableGeneralSeats 
                            });
                        }
                    });
                });

                showtimeSelection.innerHTML = '';
                
                if (allShowtimes.length === 0) {
                    showtimeSelection.innerHTML = '<div style="text-align: center; padding: 2rem 0; color: #6b7280;">æ­¤æ™‚æ®µç„¡å¯ç”¨å ´æ¬¡æˆ–å‰©é¤˜åº§ä½ä¸è¶³</div>';
                    loadingStatus.textContent = "è©²é›»å½±åœ¨é¸æ“‡çš„å½±åŸæš«ç„¡ç¬¦åˆæ¢ä»¶çš„å ´æ¬¡";
                    return;
                }
                
                // æŒ‰æ—¥æœŸåˆ†çµ„å ´æ¬¡
                const groupedByDate = {};
                allShowtimes.forEach(showtime => {
                    if (!groupedByDate[showtime.date]) groupedByDate[showtime.date] = [];
                    groupedByDate[showtime.date].push(showtime);
                });
                
                // ç”Ÿæˆå ´æ¬¡é¸æ“‡ä»‹é¢
                Object.keys(groupedByDate).forEach(date => {
                    const dateSection = document.createElement('div');
                    dateSection.className = 'date-section';
                    
                    const dateHeader = document.createElement('h4');
                    dateHeader.className = 'date-header';
                    dateHeader.textContent = date;
                    dateSection.appendChild(dateHeader);
                    
                    const showtimesGrid = document.createElement('div');
                    showtimesGrid.className = 'showtime-grid';
                    
                    groupedByDate[date].forEach(showtime => {
                        const showtimeCard = document.createElement('div');
                        showtimeCard.className = 'showtime-card';
                        showtimeCard.dataset.showtimeId = showtime.id;
                        
                        const groupBadge = showtime.availableForGroup ? 
                            '<span class="showtime-group-badge">åœ˜é«”å ´</span>' : '';
                        
                        showtimeCard.innerHTML = `
                            ${groupBadge}
                            <div class="showtime-time">${showtime.time}</div>
                            <div class="showtime-details">
                                <div class="showtime-row">
                                    <span>å½±å»³:</span>
                                    <span class="font-medium">${showtime.theater}</span>
                                </div>
                                <div class="showtime-row">
                                    <span>ç‰ˆæœ¬:</span>
                                    <span class="font-medium">${showtime.type}</span>
                                </div>
                                <div class="showtime-row showtime-divider">
                                    <span>å‰©é¤˜åº§ä½:</span>
                                    <span class="${showtime.availableSeats < 10 ? 'seats-low' : 'seats-available'}">${showtime.availableSeats}</span>
                                </div>
                            </div>
                        `;
                        
                        showtimeCard.addEventListener('click', () => selectShowtime(showtime));
                        showtimesGrid.appendChild(showtimeCard);
                    });
                    
                    dateSection.appendChild(showtimesGrid);
                    showtimeSelection.appendChild(dateSection);
                });
                
                showtimeSelectionSection.classList.remove('hidden');
                updateStepIndicator(3);
                loadingStatus.textContent = "";
            } catch (error) {
                console.error('è¼‰å…¥å ´æ¬¡å¤±æ•—:', error);
                showtimeSelection.innerHTML = '<div style="text-align: center; padding: 2rem 0; color: #6b7280;">è¼‰å…¥å ´æ¬¡æ¸…å–®å¤±æ•—</div>';
            }
        }

        // é¸æ“‡å ´æ¬¡
        function selectShowtime(showtime) {
            document.querySelectorAll('.showtime-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const selectedCard = document.querySelector(`[data-showtime-id="${showtime.id}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            currentSelections.showtime = showtime;
            nextButton.disabled = false;
            
            loadingStatus.innerHTML = `
                <div class="success-message">
                    <p class="success-text">å·²é¸æ“‡: 
                        <span style="font-weight: bold;">${currentSelections.ticketType === 'general' ? 'ä¸€èˆ¬è³¼ç¥¨' : 'åœ˜é«”ç¥¨'}</span> | 
                        <span style="font-weight: bold;">${currentSelections.cinema.name}</span> | 
                        <span style="font-weight: bold;">${currentSelections.movie.title}</span> | 
                        <span style="font-weight: bold;">${showtime.date} ${showtime.time} ${showtime.theater}</span>
                    </p>
                </div>
            `;
        }
        
        // ç›£è½å™¨ï¼šå½±åŸé¸æ“‡æ”¹è®Šæ™‚ (æ­¥é©Ÿ 2)
        cinemaSelect.addEventListener('change', function() {
            const cinemaId = this.value;
            if (cinemaId) {
                // æ›´æ–°å½±åŸè³‡è¨Š
                currentSelections.cinema = {
                    id: cinemaId,
                    name: this.options[this.selectedIndex].textContent.split(' ')[0]
                };
                
                loadMovies(cinemaId);
            }
        });

        // ç›£è½å™¨ï¼šè¡¨å–®æäº¤ (æ­¥é©Ÿ 6: ç¢ºèªè³‡æ–™æ ¼å¼ä¸¦å‚³é)
        form.addEventListener('submit', function(event) {
            event.preventDefault();

            // æª¢æŸ¥å¿…å¡«æ¬„ä½
            if (!currentSelections.ticketType) {
                alert('è«‹å…ˆé¸æ“‡ç¥¨å‹™é¡å‹');
                return;
            }
            if (!currentSelections.cinema) {
                alert('è«‹é¸æ“‡å½±åŸåœ°é»');
                return;
            }
            // æ ¹æ“šéœ€æ±‚ 5: å¦‚æœæ²’æœ‰é¸æ“‡å½±åŸ (å¿…å¡«) å‰‡æç¤ºä¸¦è¦æ±‚å›åˆ°æ­¥é©Ÿ 5 (å³é‡æ–°è¼‰å…¥å ´æ¬¡)
            if (!cinemaSelect.value) {
                alert('è«‹å‹™å¿…é¸æ“‡å½±åŸåœ°é»ï¼');
                updateStepIndicator(1); // å°å›é¸æ“‡å½±åŸ
                return;
            }
            
            // æª¢æŸ¥é›»å½±/å ´æ¬¡ (å¦‚æœä½¿ç”¨è€…æ²’æœ‰é¸æ“‡ï¼Œåªé¡¯ç¤ºæ‰€æœ‰å ´æ¬¡çš„è©±ï¼Œé€™è£¡éœ€è¦èª¿æ•´é‚è¼¯ã€‚
            // ç”±æ–¼ç›®å‰é‚è¼¯æ˜¯é»æ“Šé›»å½±/å ´æ¬¡æ‰æœƒå•Ÿç”¨ä¸‹ä¸€æ­¥æŒ‰éˆ•ï¼Œæ‰€ä»¥åªè¦ä¸‹ä¸€æ­¥æŒ‰éˆ•å¯é»æ“Šï¼Œè³‡æ–™å°±æ˜¯å®Œæ•´çš„)
            if (!currentSelections.movie || !currentSelections.showtime) {
                alert('è«‹ç¢ºèªå·²é¸æ“‡é›»å½±å’Œå ´æ¬¡ã€‚');
                return;
            }

            // çµ±ä¸€æ ¼å¼å‚³éçµ¦ä¸‹ä¸€å€‹é é¢
            const bookingData = {
            ticketType: currentSelections.ticketType,
            cinema: { 
                // å‚³éå®Œæ•´é›»å½±é™¢è³‡è¨Š
                id: currentSelections.cinema.id, 
                name: currentSelections.cinema.name
            },
            movie: { 
                // å‚³éå®Œæ•´é›»å½±è³‡è¨Š (åŒ…å« rating, genre, duration, image ç­‰)
                id: currentSelections.movie.id, 
                title: currentSelections.movie.title,
                duration: currentSelections.movie.duration,
                rating: currentSelections.movie.rating,
                genre: currentSelections.movie.genre,
                image: currentSelections.movie.image, // ç¢ºä¿ä¸‹ä¸€é é¡¯ç¤ºåœ–ç‰‡
                description: currentSelections.movie.description
            },
            showtime: {
                // å‚³éå®Œæ•´å ´æ¬¡è³‡è¨Š (åŒ…å« seats, careSeats, reserved ç­‰)
                id: currentSelections.showtime.id,
                date: currentSelections.showtime.date,
                time: currentSelections.showtime.time,
                theater: currentSelections.showtime.theater,
                type: currentSelections.showtime.type,
                language: currentSelections.showtime.language,
                subtitle: currentSelections.showtime.subtitle,
                seats: currentSelections.showtime.seats, // ç¸½åº§ä½æ•¸
                careSeats: currentSelections.showtime.careSeats, // æ„›å¿ƒåº§
                reserved: currentSelections.showtime.reserved, // å·²å”®å‡º
                availableSeats: currentSelections.showtime.availableSeats // å‰©é¤˜å¯è¨‚è³¼åº§ä½æ•¸
            }
            };
            
            // ä½¿ç”¨ localStorage å‚³éè³‡æ–™ (é€™æ˜¯è·¨é é¢å‚³éç›¸åŒè³‡æ–™æ ¼å¼æœ€å¸¸è¦‹çš„æ–¹æ³•)
            localStorage.setItem('currentBooking', JSON.stringify(bookingData));
            
            // å°å‘ä¸‹ä¸€é 
            if (currentSelections.ticketType === 'group') {
                window.location.href = 'booking_flow_group.html';
            } else {
                window.location.href = 'booking_flow_2.html';
            }
        });

        // é é¢è¼‰å…¥æ™‚ï¼ŒåŸ·è¡Œåˆå§‹åŒ–
        window.onload = function() {
            if (!checkLoginStatus()) {
                return;
            }
            
            renderUI();
            setupTicketTypeSelection();
            
            // æª¢æŸ¥æ˜¯å¦æœ‰æœªå®Œæˆçš„è¨‚å–® (å¦‚æœæœ‰çš„è©±å¯ä»¥è®€å–ä¸¦æ¢å¾©ç‹€æ…‹ï¼Œé€™è£¡ç°¡åŒ–ç‚ºç›´æ¥æ¸…é™¤)
            localStorage.removeItem('currentBooking'); 
        };
    </script>

    <footer>
        <p>&copy; 2025 Vieshow Ticketing System</p>
    </footer>
    
</body>
</html>